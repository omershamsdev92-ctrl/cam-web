<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SafeWatch | المراقبة الذكية v4.0</title>
    <link rel="stylesheet" href="css/style.css?v=6.3">
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
</head>

<body>
    <!-- Login Gate -->
    <div id="login-gate" class="login-overlay">
        <div class="login-card">
            <ion-icon name="shield-half"
                style="font-size: 3rem; color: var(--primary); margin-bottom: 20px;"></ion-icon>
            <h2>نظام المراقبة الآمن</h2>
            <p style="color: var(--text-muted); margin-bottom: 20px;">أدخل كلمة المرور للمتابعة</p>
            <input type="password" id="pass-input" class="login-input" placeholder="كلمة المرور">
            <button id="login-btn" class="btn" style="width: 100%;">دخول للنظام</button>
            <button onclick="localStorage.clear(); location.reload();"
                style="background:none; border:none; color:var(--text-muted); font-size:0.7rem; margin-top:20px; cursor:pointer; text-decoration:underline;">إعادة
                ضبط الإعدادات</button>
        </div>
    </div>

    <div class="container">
        <header>
            <div class="logo">
                <ion-icon name="videocam"></ion-icon>
                SafeWatch <span style="font-size: 0.7rem; opacity: 0.5;">v4.0</span>
            </div>
            <button id="install-pwa-btn" class="btn" style="padding: 10px 20px; font-size: 0.85rem; display: none;">
                <ion-icon name="download-outline"></ion-icon> تثبيت التطبيق
            </button>
        </header>

        <section class="hero">
            <h1>حول هاتفك القديم إلى <br> <span style="color: var(--primary);">منظومة مراقبة</span> ذكية</h1>
            <p>حل آمن، فوري، ومشفر لمراقبة أطفالك وممتلكاتك من أي مكان في العالم عبر المتصفح مباشرة.</p>

            <div
                style="background: var(--glass); padding: 40px; border-radius: 30px; border: 1px solid var(--glass-border); display: inline-block; width: 100%; max-width: 500px; text-align: center;">
                <div style="margin-bottom: 20px;">
                    <label
                        style="display: block; text-align: right; margin-bottom: 10px; color: var(--text-muted); font-size: 0.9rem;">اسم
                        الجلسة (اختياري):</label>
                    <input type="text" id="custom-session" class="login-input" style="margin: 0; font-size: 1rem;"
                        placeholder="مثلاً: kids-room">
                </div>
                <button id="createable" class="btn" style="width: 100%; margin-bottom: 12px;">
                    <ion-icon name="play-circle" style="font-size: 1.4rem;"></ion-icon> ابدأ المراقبة بالفيديو
                </button>
                <button id="create-audio-only" class="btn" style="width: 100%; background: var(--accent);">
                    <ion-icon name="mic-circle" style="font-size: 1.4rem;"></ion-icon> إنشاء رابط مراقبة صوتية فقط
                </button>
            </div>
        </section>

        <!-- Features -->
        <div class="btn-grid" style="grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
            <div class="controls-panel" style="text-align: center;">
                <ion-icon name="eye-outline" style="font-size: 2.5rem; color: var(--primary);"></ion-icon>
                <h3 style="margin: 15px 0;">بث مباشر HD</h3>
                <p style="font-size: 0.85rem; color: var(--text-muted);">جودة صورة متميزة مع أقل نسبة تأخير ممكنة.</p>
            </div>
            <div class="controls-panel" style="text-align: center;">
                <ion-icon name="lock-closed-outline" style="font-size: 2.5rem; color: var(--accent);"></ion-icon>
                <h3 style="margin: 15px 0;">خصوصية تامة</h3>
                <p style="font-size: 0.85rem; color: var(--text-muted);">تشفير طرف لطرف P2P، لا يتم حفظ الفيديو على
                    السيرفر.</p>
            </div>
            <div class="controls-panel" style="text-align: center;">
                <ion-icon name="phone-portrait-outline" style="font-size: 2.5rem; color: #fbbf24;"></ion-icon>
                <h3 style="margin: 15px 0;">سهولة الاستخدام</h3>
                <p style="font-size: 0.85rem; color: var(--text-muted);">لا يحتاج لتثبيت تطبيقات، يعمل على أندرويد و
                    آيفون.</p>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script type="module">
        import { HomeSystem } from './js/home.js';
        const app = new HomeSystem();
        document.getElementById('login-btn').onclick = () => app.checkPassword();
    </script>
</body>

</html>